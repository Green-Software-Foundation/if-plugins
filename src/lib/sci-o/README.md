# SCI-O (operational emissions)

Operational emissions refer to the carbon generated by a component while it is in use. It is the product of the energy used by the component in kWh and the grid intensity in gCO2e/kWh. The operational emissions are added to the embodied emissions (calculated using `sci-m`) to provide an overall SCI score for the component.

## Parameters

### Model config

Not Needed

### Inputs

- `energy`: energy value in kWh
- `grid-carbon-intensity`: intensity value gCO2e/kWh
- `timestamp`: a timestamp for the input
- `duration`: the amount of time, in seconds, that the input covers.

## Returns

- `operational-carbon`: the carbon emitted during a applications operation, in gCO2eq

## Calculation

To calculate the operational emissions `o` for a software application, use the following:

```
O = E * I
```

where `O` = operational emissions, `E` = energy in kWh, and `I` = grid carbon intensity.

In the IEF implementation the calculation is expressed using the following terms:

```
o = (energy * grid-carbon-intensity)
```

Read more on [operational emissions](https://github.com/Green-Software-Foundation/sci/blob/main/Software_Carbon_Intensity/Software_Carbon_Intensity_Specification.md#operational-carbon).

## Implementation

IEF implements the plugin based on the simple multiplication of the energy and intensity values as inputs. The `sci-o` model expects `energy` and `grid-carbon-intensity` to be provided as `inputs`.

> Note that the `energy` field is added to the `impl` by the `sci-e` model only. This means `sci-o` must always be preceded by `sci-e` in a model pipeline. This is always true, even if there is only a single component of `energy` such as `energy-cpu` from `teads-curve`. `sci-e` sums all the available components and adds the sum to the `impl` as `energy`.

To run the model, you must first create an instance of `SciOModel` and call its `configure()` method. Then, you can call `execute()` to return `operational-carbon`.

## Usage

The following snippet demonstrates how to call the `sci-o` model from Typescript.

```typescript
import {SciOModel} from '@grnsft/if-models';

const sciOModel = new SciOModel();
sciOModel.configure();
const results = sciOModel.execute([
  {
    energy: 0.5, // energy value in kWh
    'grid-carbon-intensity': 0.5, // intensity value gCO2e/kWh
  },
]);
```

## Example impl

IEF users will typically call the model as part of a pipeline defined in an `impl` file. In this case, instantiating and configuring the model is handled by `impact-engine` and does not have to be done explicitly by the user. The following is an example `impl` that calls `sci-o`:

```yaml
name: sci-o
description:
tags:
initialize:
  models:
    - name: sci-o
      model: SciOModel
      path: '@grnsft/if-models'
graph:
  children:
    child:
      pipeline:
        - sci-o
      config:
        sci-o:
      inputs:
        - timestamp: 2023-08-06T00:00
          duration: 3600
          energy: 0.001
          grid-carbon-intensity: 800
```

You can run this example `impl` by saving it as `./examples/impls/test/sci-o.yml` and executing the following command from the project root:

```sh
npm i -g @grnsft/if
npm i -g @grnsft/if-models
impact-engine --impl ./examples/impls/test/sci-o.yml --ompl ./examples/ompls/sci-o.yml
```

The results will be saved to a new `yaml` file in `./examples/ompls`.
